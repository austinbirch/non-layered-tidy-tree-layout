!function(n,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.nonLayeredTidyTreeLayout=e():n.nonLayeredTidyTreeLayout=e()}(window,(function(){return function(n){var e={};function t(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return n[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}return t.m=n,t.c=e,t.d=function(n,e,r){t.o(n,e)||Object.defineProperty(n,e,{enumerable:!0,get:r})},t.r=function(n){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(n,"__esModule",{value:!0})},t.t=function(n,e){if(1&e&&(n=t(n)),8&e)return n;if(4&e&&"object"==typeof n&&n&&n.__esModule)return n;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:n}),2&e&&"string"!=typeof n)for(var o in n)t.d(r,o,function(e){return n[e]}.bind(null,o));return r},t.n=function(n){var e=n&&n.__esModule?function(){return n.default}:function(){return n};return t.d(e,"a",e),e},t.o=function(n,e){return Object.prototype.hasOwnProperty.call(n,e)},t.p="",t(t.s=0)}([function(n,e,t){"use strict";function r(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}t.r(e);var o=function n(e,t,o,i){r(this,n),this.w=e,this.h=t,this.y=o,this.c=i,this.cs=i.length,this.x=0,this.prelim=0,this.mod=0,this.shift=0,this.change=0,this.tl=null,this.tr=null,this.el=null,this.er=null,this.msel=0,this.mser=0};function i(n){0===n.cs?(n.el=n,n.er=n,n.msel=n.mser=0):(n.el=n.c[0].el,n.msel=n.c[0].msel,n.er=n.c[n.cs-1].er,n.mser=n.c[n.cs-1].mser)}function c(n){return n.y+n.h}var u=function n(e,t,o){r(this,n),this.lowY=e,this.index=t,this.next=o};function l(n,e,t){for(;null!==t&&n>=t.lowY;)t=t.next;return new u(n,e,t)}function s(n,e,t,r){n.c[e].mod+=r,n.c[e].msel+=r,n.c[e].mser+=r,function(n,e,t,r){if(t!==e-1){var o=e-t;n.c[t+1].shift+=r/o,n.c[e].shift-=r/o,n.c[e].change-=r-r/o}}(n,e,t,r)}function f(n){return 0===n.cs?n.tl:n.c[0]}function a(n){return 0===n.cs?n.tr:n.c[n.cs-1]}function d(n,e,t){for(var r=n.c[e-1],o=r.mod,i=n.c[e],u=i.mod;null!==r&&null!==i;){c(r)>t.lowY&&(t=t.next);var l=o+r.prelim+r.w-(u+i.prelim);l>0&&(u+=l,s(n,e,t.index,l));var d=c(r),h=c(i);d<=h&&null!==(r=a(r))&&(o+=r.mod),d>=h&&null!==(i=f(i))&&(u+=i.mod)}null===r&&null!==i?function(n,e,t,r){var o=n.c[0].el;o.tl=t;var i=r-t.mod-n.c[0].msel;o.mod+=i,o.prelim-=i,n.c[0].el=n.c[e].el,n.c[0].msel=n.c[e].msel}(n,e,i,u):null!==r&&null===i&&function(n,e,t,r){var o=n.c[e].er;o.tr=t;var i=r-t.mod-n.c[e].mser;o.mod+=i,o.prelim-=i,n.c[e].er=n.c[e-1].er,n.c[e].mser=n.c[e-1].mser}(n,e,r,o)}function h(n){!function n(e){if(0!==e.cs){n(e.c[0]);for(var t=l(c(e.c[0].el),0,null),r=1;r<e.cs;r++){n(e.c[r]);var o=c(e.c[r].er);d(e,r,t),t=l(o,r,t)}!function(n){n.prelim=(n.c[0].prelim+n.c[0].mod+n.c[n.cs-1].mod+n.c[n.cs-1].prelim+n.c[n.cs-1].w)/2-n.w/2}(e),i(e)}else i(e)}(n),function n(e,t){t+=e.mod,e.x=e.prelim+t,function(n){for(var e=0,t=0,r=0;r<n.cs;r++)t+=(e+=n.c[r].shift)+n.c[r].change,n.c[r].mod+=t}(e);for(var r=0;r<e.cs;r++)n(e.c[r],t)}(n,0)}function m(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function v(n,e){for(var t=0;t<e.length;t++){var r=e[t];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(n,r.key,r)}}function p(n,e,t){return e&&v(n.prototype,e),t&&v(n,t),n}var y=function(){function n(e,t){m(this,n),this.gap=e,this.bottomPadding=t}return p(n,[{key:"addBoundingBox",value:function(n,e){return{width:n+this.gap,height:e+this.bottomPadding}}},{key:"removeBoundingBox",value:function(n,e){return{x:n+this.gap/2,y:e}}}]),n}(),g=function(){function n(e){m(this,n),this.bb=e}return p(n,[{key:"layoutTreeData",value:function(n){var e=this.convert(n);return h(e),this.assignCoordinates(e,n),n}},{key:"convert",value:function(n){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;if(null===n)return null;var t=this.bb.addBoundingBox(n.width,n.height),r=t.width,i=t.height,c=[];if(n.children&&n.children.length)for(var u=0;u<n.children.length;u++)c[u]=this.convert(n.children[u],e+i);return new o(r,i,e,c)}},{key:"assignCoordinates",value:function(n,e){var t=this.bb.removeBoundingBox(n.x,n.y),r=t.x,o=t.y;e.x=r,e.y=o;for(var i=0;i<n.c.length;i++)this.assignCoordinates(n.c[i],e.children[i])}}]),n}();t.d(e,"layout",(function(){return h})),t.d(e,"Tree",(function(){return o})),t.d(e,"BoundingBox",(function(){return y})),t.d(e,"Layout",(function(){return g}))}])}));